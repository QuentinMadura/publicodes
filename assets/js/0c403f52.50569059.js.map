{"version":3,"file":"assets/js/0c403f52.50569059.js","mappings":"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","sources":["webpack://website/./src/components/PublicodeExample.tsx","webpack://website/./docs/principes-de-base.mdx","webpack://website/./src/components/publicodeExample.module.css"],"sourcesContent":["import type {} from '@docusaurus/theme-classic' // required for @theme/CodeBlock types\nimport CodeBlock from '@theme/CodeBlock'\nimport React, { lazy, Suspense, useEffect, useState } from 'react'\nimport publicodeStyles from './publicodeExample.module.css'\nconst Playground = lazy(() => import('./Playground'))\n\ninterface PublicodeExampleProps {\n\trules: string\n\tmeta?: string\n}\n\nexport default function PublicodeExample({\n\trules,\n\tmeta,\n}: PublicodeExampleProps) {\n\tconst [code, setCode] = useState(rules.trim())\n\tconst [edit, setEdit] = useState(false)\n\tconst [target, setTarget] = useState(meta)\n\n\t// Use json lang instead of yaml for better highlight\n\tconst language = 'json'\n\n\tuseEffect(() => {\n\t\tif (!edit) {\n\t\t\tsetCode(rules.trim())\n\t\t}\n\t}, [edit, rules])\n\n\treturn (\n\t\t<div className={publicodeStyles.container}>\n\t\t\t{!edit ? (\n\t\t\t\t<CodeBlock language={language}>{code}</CodeBlock>\n\t\t\t) : (\n\t\t\t\t<Suspense fallback={<div>Chargement en cours</div>}>\n\t\t\t\t\t<Playground\n\t\t\t\t\t\tlanguage={language}\n\t\t\t\t\t\tdefaultTarget={target}\n\t\t\t\t\t\tonTargetChange={setTarget}\n\t\t\t\t\t\tonChange={(text) => setCode(text)}\n\t\t\t\t\t>\n\t\t\t\t\t\t{code}\n\t\t\t\t\t</Playground>\n\t\t\t\t</Suspense>\n\t\t\t)}\n\t\t\t<button\n\t\t\t\tclassName={publicodeStyles.button}\n\t\t\t\tonClick={() => setEdit((e) => !e)}\n\t\t\t\tstyle={edit ? { top: 0 } : { bottom: 0 }}\n\t\t\t>\n\t\t\t\t{!edit ? '⚡ Tester' : 'Fermer'}\n\t\t\t</button>\n\t\t</div>\n\t)\n}\n","\n\n/* @jsxRuntime classic */\n/* @jsx mdx */\n/* @jsxFrag React.Fragment */\n\nimport React from 'react';\nimport { mdx } from '@mdx-js/react';\n\n\nexport const frontMatter = {\n\tsidebar_position: 1,\n\ttitle: 'Principes de base'\n};\nexport const contentTitle = undefined;\nexport const metadata = {\n  \"unversionedId\": \"principes-de-base\",\n  \"id\": \"principes-de-base\",\n  \"title\": \"Principes de base\",\n  \"description\": \"La syntaxe de Publicodes est basée sur le langage\",\n  \"source\": \"@site/docs/principes-de-base.mdx\",\n  \"sourceDirName\": \".\",\n  \"slug\": \"/principes-de-base\",\n  \"permalink\": \"/docs/principes-de-base\",\n  \"draft\": false,\n  \"editUrl\": \"https://github.com/betagouv/publicodes/edit/master/website/docs/principes-de-base.mdx\",\n  \"tags\": [],\n  \"version\": \"current\",\n  \"sidebarPosition\": 1,\n  \"frontMatter\": {\n    \"sidebar_position\": 1,\n    \"title\": \"Principes de base\"\n  },\n  \"sidebar\": \"tutorialSidebar\",\n  \"next\": {\n    \"title\": \"Tutoriel\",\n    \"permalink\": \"/docs/tutoriel\"\n  }\n};\nexport const assets = {\n\n};\n\nimport PublicodeExample from '@site/src/components/PublicodeExample.tsx'\nexport const toc = [{\n  value: 'Unités',\n  id: 'unités',\n  level: 2\n}, {\n  value: 'Pourcentage <code>%</code>',\n  id: 'pourcentage-',\n  level: 3\n}, {\n  value: 'Mécanismes',\n  id: 'mécanismes',\n  level: 2\n}, {\n  value: 'Mécanismes chaînés',\n  id: 'mécanismes-chaînés',\n  level: 3\n}, {\n  value: 'Pages d&#39;explications',\n  id: 'pages-dexplications',\n  level: 2\n}, {\n  value: 'Conditions booléennes',\n  id: 'conditions-booléennes',\n  level: 2\n}, {\n  value: 'Applicabilité',\n  id: 'applicabilité',\n  level: 2\n}, {\n  value: 'Tester l&#39;applicabilité',\n  id: 'tester-lapplicabilité',\n  level: 3\n}, {\n  value: 'Rend non applicable',\n  id: 'rend-non-applicable',\n  level: 3\n}, {\n  value: 'Espaces de noms',\n  id: 'espaces-de-noms',\n  level: 2\n}, {\n  value: 'Désactivation de branche',\n  id: 'désactivation-de-branche',\n  level: 3\n}, {\n  value: 'Remplacement',\n  id: 'remplacement',\n  level: 2\n}, {\n  value: 'Règle imbriquées',\n  id: 'règle-imbriquées',\n  level: 2\n}, {\n  value: 'A l&#39;intérieur des mécanismes : <code>nom</code>',\n  id: 'a-lintérieur-des-mécanismes--nom',\n  level: 3\n}, {\n  value: 'Directement sur la règle : <code>avec</code>',\n  id: 'directement-sur-la-règle--avec',\n  level: 3\n}, {\n  value: 'Règles non définie',\n  id: 'règles-non-définie',\n  level: 2\n}, {\n  value: 'Règles privées',\n  id: 'règles-privées',\n  level: 2\n}, {\n  value: 'Comportement des règles privées',\n  id: 'comportement-des-règles-privées',\n  level: 3\n}];\n\nconst layoutProps = {\n  toc\n};\nconst MDXLayout = \"wrapper\"\nexport default function MDXContent({\n  components,\n  ...props\n}) {\n  return <MDXLayout {...layoutProps} {...props} components={components} mdxType=\"MDXLayout\">\n\n\n    <p>{`La syntaxe de Publicodes est basée sur le langage\n`}<a parentName=\"p\" {...{\n        \"href\": \"https://en.wikipedia.org/wiki/YAML\"\n      }}>{`Yaml`}</a>{`.`}</p>\n    <p>{`Un fichier Publicodes contient une liste de `}<em parentName=\"p\">{`règles`}</em>{` identifiées par leur `}<em parentName=\"p\">{`nom`}</em>{` et\npossédant une `}<em parentName=\"p\">{`valeur`}</em>{` :`}</p>\n    <PublicodeExample rules={`prix d'un repas: 10 €`} mdxType=\"PublicodeExample\" />\n    <p>{`Une formule de calcul peut faire `}<em parentName=\"p\">{`référence`}</em>{` à d'autres règles.\nDans l'exemple suivant la règle `}<inlineCode parentName=\"p\">{`prix total`}</inlineCode>{` aura pour valeur 50 (= 5 `}{`*`}{` 10)`}</p>\n    <PublicodeExample rules={`prix d'un repas: 10 €\nprix total: 5 * prix d'un repas`} mdxType=\"PublicodeExample\" />\n    <p>{`Il s'agit d'un langage déclaratif : comme dans une formule d'un tableur le `}<inlineCode parentName=\"p\">{`prix total`}</inlineCode>{` sera recalculé automatiquement si le prix d'un repas change. L'ordre de\ndéfinition des règles n'a pas d'importance.`}</p>\n    <h2 {...{\n      \"id\": \"unités\"\n    }}>{`Unités`}</h2>\n    <p>{`Pour fiabiliser les calculs et faciliter leur compréhension, on peut préciser\nl'unité des valeurs littérales :`}</p>\n    <PublicodeExample rules={`prix d'un repas: 10 €/repas\nnombre de repas: 5 repas\n\nprix total: nombre de repas * prix d'un repas`} mdxType=\"PublicodeExample\" />\n    <p>{`Le calcul est inchangé mais on a indiqué que le \"prix d'un repas\" s'exprime en\n`}<inlineCode parentName=\"p\">{`€/repas`}</inlineCode>{` et que le \"nombre de repas\" est un nombre de `}<inlineCode parentName=\"p\">{`repas`}</inlineCode>{`. L'unité du prix\ntotal est inférée automatiquement comme étant en `}<inlineCode parentName=\"p\">{`€`}</inlineCode>{`. (`}<inlineCode parentName=\"p\">{`€/repas`}</inlineCode>{` `}{`*`}{` `}<inlineCode parentName=\"p\">{`repas`}</inlineCode>{` =\n`}<inlineCode parentName=\"p\">{`€`}</inlineCode>{`)`}</p>\n    <p>{`Ce système d'unité permet de typer les formules de calcul et de rejeter\nautomatiquement des formules incohérentes :`}</p>\n    <PublicodeExample rules={`prix d'un repas: 10 €/repas\nnombre de repas: 5 repas\nfrais de réservation: 1 €/repas\n\nprix total: nombre de repas * prix d'un repas + frais de réservation\n# Erreur:\n# La formule de \"prix total\" est invalide.`} mdxType=\"PublicodeExample\" />\n    <p>{`Dans l'exemple ci-dessus, Publicodes détecte une erreur car les termes de\nl'addition ont des unités incompatibles : d'un côté on a des `}<inlineCode parentName=\"p\">{`€`}</inlineCode>{` et de l'autre\ndes `}<inlineCode parentName=\"p\">{`€/repas`}</inlineCode>{`.`}</p>\n    <p>{`Cette incohérence d'unité témoigne d'une erreur de logique. Ici, une manière de corriger l'erreur peut être de factoriser la variable \"nombre de repas\" dans la formule du \"prix total\".`}</p>\n    <PublicodeExample rules={`prix d'un repas: 10 €/repas\nnombre de repas: 5 repas\nfrais de réservation: 1 €/repas\n\nprix total: nombre de repas * (prix d'un repas + frais de réservation)`} mdxType=\"PublicodeExample\" />\n    <admonition {...{\n      \"title\": \"Attention\",\n      \"type\": \"caution\"\n    }}><p parentName=\"admonition\">{`Il ne faut pas insérer d'espace autour de la barre oblique dans\nles unités, l'unité `}<inlineCode parentName=\"p\">{`€ / mois`}</inlineCode>{` doit être notée `}<inlineCode parentName=\"p\">{`€/mois`}</inlineCode>{`.`}</p></admonition>\n    <p>{`Publicodes convertit automatiquement les unités si besoin.`}</p>\n    <PublicodeExample rules={`salaire: 1500 €/mois\nprime faible salaire applicable: salaire < 20 k€/an`} mdxType=\"PublicodeExample\" />\n    <admonition {...{\n      \"type\": \"info\"\n    }}><p parentName=\"admonition\">{`On peut forcer la conversion des unités via le `}<a parentName=\"p\" {...{\n          \"href\": \"/docs/api/m%C3%A9canismes#unit%C3%A9\"\n        }}>{`mécanisme `}<inlineCode parentName=\"a\">{`unité`}</inlineCode></a>{`.`}</p></admonition>\n    <p><strong parentName=\"p\">{`Types de base disponibles pour la conversion :`}</strong></p>\n    <ul>\n      <li parentName=\"ul\"><inlineCode parentName=\"li\">{`jour`}</inlineCode>{` / `}<inlineCode parentName=\"li\">{`mois`}</inlineCode>{` / `}<inlineCode parentName=\"li\">{`an`}</inlineCode></li>\n      <li parentName=\"ul\"><inlineCode parentName=\"li\">{`€`}</inlineCode>{` / `}<inlineCode parentName=\"li\">{`k€`}</inlineCode></li>\n      <li parentName=\"ul\"><inlineCode parentName=\"li\">{`g`}</inlineCode>{` / `}<inlineCode parentName=\"li\">{`kg`}</inlineCode>{` / `}<inlineCode parentName=\"li\">{`mg`}</inlineCode></li>\n    </ul>\n    <h3 {...{\n      \"id\": \"pourcentage-\"\n    }}>{`Pourcentage `}<inlineCode parentName=\"h3\">{`%`}</inlineCode></h3>\n    <p>{`Il est possible de spécifier un pourcentage comme unité. L'addition d'un nombre avec un pourcentage revient à ajouter le pourcentage à ce nombre. De même pour la soustraction.`}</p>\n    <PublicodeExample rules={`prix TTC: 10€ + 20%`} mdxType=\"PublicodeExample\" />\n    <p>{`Le résultat de l'addition de deux pourcentages est bien la somme des deux nombres :`}</p>\n    <PublicodeExample rules={`réduction: 2.4% + 5.0%`} mdxType=\"PublicodeExample\" />\n    <h2 {...{\n      \"id\": \"mécanismes\"\n    }}>{`Mécanismes`}</h2>\n    <p>{`Il existe une autre manière d'écrire des formules de calcul : les mécanismes. Au lieu de définir la formule sur une ligne, celle-ci prend la forme d'un objet sur plusieurs lignes.`}</p>\n    <p>{`Par exemple, la formule suivante :`}</p>\n    <PublicodeExample rules={`prix total: 5 repas * 9 €/repas`} mdxType=\"PublicodeExample\" />\n    <p>{`peut également s'écrire en utilisant le mécanisme `}<a parentName=\"p\" {...{\n        \"href\": \"/docs/api/m%C3%A9canismes#produit\"\n      }}><inlineCode parentName=\"a\">{`produit`}</inlineCode></a>{` :`}</p>\n    <PublicodeExample rules={`prix total:\n  produit:\n    assiette: 9 €/repas\n    facteur: 5 repas`} mdxType=\"PublicodeExample\" />\n    <p>{`Un des avantages de cette écriture est que la syntaxe hiérarchique de Yaml permet d'imbriquer les mécanismes :`}</p>\n    <PublicodeExample rules={`table: 12 personnes\naddition:\n  somme:\n    - 7 cafés * 1.5 €/cafés\n    - produit: # Menu unique dégressif pour les groupes\n        assiette: table\n        facteur:\n          variations:\n          - si: table > 10 personnes\n            alors: 12 €/personnes\n          - sinon: 15 €/personnes`} mdxType=\"PublicodeExample\" />\n    <h3 {...{\n      \"id\": \"mécanismes-chaînés\"\n    }}>{`Mécanismes chaînés`}</h3>\n    <p>{`Certains mécanismes peuvent apparaître au même niveau d'indentation. Dans ce cas, le moteur appliquera les transformations dans un ordre préétabli.`}</p>\n    <PublicodeExample rules={`nombre de repas: 12 repas\nremboursement repas:\n  valeur: nombre de repas * 4.21 €/repas\n  plafond: 500€\n  abattement: 25€\n  arrondi: oui`} mdxType=\"PublicodeExample\" />\n    <blockquote>\n      <p parentName=\"blockquote\"><strong parentName=\"p\"><a parentName=\"strong\" {...{\n            \"href\": \"/docs/api/m%C3%A9canismes\"\n          }}>{`Voir la liste des mécanismes existants`}</a></strong></p>\n    </blockquote>\n    <h2 {...{\n      \"id\": \"pages-dexplications\"\n    }}>{`Pages d'explications`}</h2>\n    <p>{`L'explication des règles est un des objectifs fondamentaux de Publicodes.`}</p>\n    <p>{`Chaque règle se voit générer automatiquement une page explicative\ncorrespondante dans le front-end, contenant une information facilement digeste\nmise en regard des calculs eux-mêmes.`}</p>\n    <p>{`Plusieurs propriétés sont reprises dans ces pages d'explications :`}</p>\n    <ul>\n      <li parentName=\"ul\">{`le `}<strong parentName=\"li\">{`titre`}</strong>{`, qui s'affiche en haut de la page. Par défaut on utilise le nom\nde la règle, mais la propriété `}<inlineCode parentName=\"li\">{`titre`}</inlineCode>{` permet de choisir un titre plus\napproprié ;`}</li>\n      <li parentName=\"ul\">{`la `}<strong parentName=\"li\">{`description`}</strong>{` est affichée comme paragraphe d'introduction sur la page.\nOn utilise le caractère `}<inlineCode parentName=\"li\">{`|`}</inlineCode>{` pour indiquer au parseur Yaml que la description est sur plusieurs lignes ;`}</li>\n      <li parentName=\"ul\">{`une `}<strong parentName=\"li\">{`note`}</strong>{` de bas de page, affichée après la formule de calcul. Elle peut être sur plusieurs lignes également.`}\n        {/* TODO : expliquer les références nouvelle version- les **références** externes (documentation utile) affichées en\n          bas de page et qui sont constituées d'une liste de liens avec une description. */}\n      </li>\n    </ul>\n    <PublicodeExample rules={`ticket resto:\n  titre: Prise en charge des titres-restaurants\n  formule: 4 €/repas\n  description: |-\n    L'employeur peut remettre des titres restaurants sous plusieurs formats: ticket papier, carte à puce\n    ou appli mobile\n  note: |-\n    La valeur a été revalorisée en 2022 pour faire face à l'inflation.`} mdxType=\"PublicodeExample\" />\n    <h2 {...{\n      \"id\": \"conditions-booléennes\"\n    }}>{`Conditions booléennes`}</h2>\n    <p>{`Publicodes supporte des opérateurs booléens basiques.`}</p>\n    <PublicodeExample rules={`âge: 17 ans\nnationalité française: oui\ncitoyen européen:\ndomicilié en France:\n\ndroit de vote municipale:\n  toutes ces conditions:\n    - âge >= 18 ans\n    - une de ces conditions:\n        - nationalité française\n        - toutes ces conditions:\n          - citoyen européen\n          - domicilié en France\n`} mdxType=\"PublicodeExample\" />\n    <p>{`Il est possible de faire des branchements conditionnels via le mécanisme `}<a parentName=\"p\" {...{\n        \"href\": \"/docs/api/m%C3%A9canismes#variations\"\n      }}><inlineCode parentName=\"a\">{`variations`}</inlineCode></a></p>\n    <h2 {...{\n      \"id\": \"applicabilité\"\n    }}>{`Applicabilité`}</h2>\n    <p>{`On peut définir des conditions d'applicabilité pour des valeurs :`}</p>\n    <PublicodeExample rules={`date de début: 12/02/2020\n\nancienneté en fin d'année:\n  durée:\n    depuis: date de début\n    jusqu'à: 31/12/2020\n\nprime de vacances:\n  applicable si: ancienneté en fin d'année > 1 an\n  valeur: 200€`} mdxType=\"PublicodeExample\" />\n    <p>{`Ici, si l'ancienneté est inférieure à un an, alors la prime de vacances sera\n`}<em parentName=\"p\">{`non applicable`}</em>{`.`}</p>\n    <p>{`Les variables `}<em parentName=\"p\">{`non applicable`}</em>{` sont prise en compte différement au niveau des mécanismes numériques.\nPar exemple le mécanisme `}<inlineCode parentName=\"p\">{`somme`}</inlineCode>{` comptera une prime non applicable comme valant zéro. Un plafond `}<em parentName=\"p\">{`non applicable`}</em>{` n'aura pas d'incidence sur la valeur retournée (même chose pour un abattement ou un plancher par exemple).`}</p>\n    <admonition {...{\n      \"type\": \"caution\"\n    }}><mdxAdmonitionTitle parentName=\"admonition\">{`La valeur `}<inlineCode parentName=\"mdxAdmonitionTitle\">{`non`}</inlineCode>{` est applicable`}</mdxAdmonitionTitle><p parentName=\"admonition\">{`Publicodes différencie désormais la valeur booléenne `}<inlineCode parentName=\"p\">{`non`}</inlineCode>{` d'une valeur `}<em parentName=\"p\">{`non applicable`}</em>{`. Cela permet par exemple de cacher les questions non applicable `}<a parentName=\"p\" {...{\n          \"href\": \"/docs/guides/cr%C3%A9er-formulaire\"\n        }}>{`dans un formulaire`}</a>{` tout en affichant les questions dont la réponse est `}<inlineCode parentName=\"p\">{`non`}</inlineCode>{`.`}</p></admonition>\n    <h3 {...{\n      \"id\": \"tester-lapplicabilité\"\n    }}>{`Tester l'applicabilité`}</h3>\n    <p>{`On peut tester si une variable est applicable ou non applicable avec les mécanismes `}<inlineCode parentName=\"p\">{`est applicable`}</inlineCode>{` et `}<inlineCode parentName=\"p\">{`est non applicable`}</inlineCode>{`.`}</p>\n    <h3 {...{\n      \"id\": \"rend-non-applicable\"\n    }}>{`Rend non applicable`}</h3>\n    <p>{`Il est également possible de rendre une règle non applicable depuis une autre règle :`}</p>\n    <PublicodeExample rules={`nouveau salarié:\n  valeur: oui\n  rend non applicable: prime de vacances\n\nprime de vacances: 200€\n\nprimes:\n  somme:\n    - prime de vacances\n    - 150€`} mdxType=\"PublicodeExample\" />\n    <admonition {...{\n      \"title\": \"Note\",\n      \"type\": \"info\"\n    }}><p parentName=\"admonition\">{`La syntaxe `}<inlineCode parentName=\"p\">{`rend non applicable`}</inlineCode>{` fonctionne de la même manière que le remplacement : elle rend non applicable toutes les références à la règle choisie.`}</p><p parentName=\"admonition\"><strong parentName=\"p\"><a parentName=\"strong\" {...{\n            \"href\": \"/docs/principes-de-base#remplacement\"\n          }}>{`En savoir plus sur le remplacement`}</a></strong></p></admonition>\n    <h2 {...{\n      \"id\": \"espaces-de-noms\"\n    }}>{`Espaces de noms`}</h2>\n    <p>{`Les espaces de noms sont utiles pour organiser un grand nombre de règles. On\nutilise le `}<inlineCode parentName=\"p\">{`.`}</inlineCode>{` pour exprimer la hiérarchie des noms.`}</p>\n    <PublicodeExample rules={`prime de vacances: taux * 1000 €\nprime de vacances . taux: 6%`} mdxType=\"PublicodeExample\" />\n    <p>{`Ici, `}<inlineCode parentName=\"p\">{`prime de vacances`}</inlineCode>{` est à la fois une règle et un espace de noms. La variable\n`}<inlineCode parentName=\"p\">{`taux`}</inlineCode>{` est définie dans cet espace de noms et c'est elle qui est référencée dans\nla formule de calcul de la règle `}<inlineCode parentName=\"p\">{`prime de vacances`}</inlineCode>{`.`}</p>\n    <p>{`La règle `}<inlineCode parentName=\"p\">{`prime de vacances`}</inlineCode>{` est elle-même définie dans l'espace de nom racine.`}</p>\n    <p>{`On pourrait avoir une autre variable `}<inlineCode parentName=\"p\">{`taux`}</inlineCode>{` dans un espace de nom\ndifférent, sans que cela entre en conflit :`}</p>\n    <PublicodeExample rules={`prime de vacances: taux * 1000 €\nprime de vacances . taux: 6%\n\n# Ceci n'entre pas dans le calcul de \\`prime de vacances\\` définie plus haut\nautre prime:\nautre prime . taux: 19%`} mdxType=\"PublicodeExample\" />\n    <p>{`On dit que la règle `}<inlineCode parentName=\"p\">{`prime de vacances`}</inlineCode>{` fait référence à la\nrègle `}<inlineCode parentName=\"p\">{`prime de vacances . taux`}</inlineCode>{` via le nom raccourci `}<inlineCode parentName=\"p\">{`taux`}</inlineCode>{`.`}</p>\n    <p>{`Pour faire référence à une règle hors de son espace de nom, on peut écrire le\nnom complet de cette règle:`}</p>\n    <PublicodeExample rules={`autre prime:\nautre prime . taux: 19%\nprime de vacances v2: autre prime . taux * 1000 €`} mdxType=\"PublicodeExample\" />\n    <p>{`Dans le cas d'espaces de noms imbriqués (à plus qu'un étage), le nom inscrit\ndans une règle donnée est recherché de plus en plus haut dans la hiérarchie des\nespaces de nom jusqu'à la racine.`}</p>\n    <PublicodeExample rules={`contrat salarié:\ncontrat salarié . rémunération:\ncontrat salarié . rémunération . primes:\n\ncontrat salarié . rémunération . primes . prime de vacances:\n  valeur: taux générique * 1000 €\n\ncontrat salarié . rémunération . taux générique:\n  valeur: 10%`} mdxType=\"PublicodeExample\" />\n    <p>{`Ici `}<inlineCode parentName=\"p\">{`contrat salarié . rémunération . primes . prime de vacances`}</inlineCode>{` va faire\nréférence à `}<inlineCode parentName=\"p\">{`contrat salarié . rémunération . taux générique`}</inlineCode>{` trouvé deux\nespaces de noms plus haut, et va donc valoir `}<inlineCode parentName=\"p\">{`100 €`}</inlineCode>{`.`}</p>\n    <h3 {...{\n      \"id\": \"désactivation-de-branche\"\n    }}>{`Désactivation de branche`}</h3>\n    <p>{`Il est possible de désactiver l'ensemble des règles définies dans un espace de nom.`}</p>\n    <p>{`Toutes les règles possèdent une dépendance implicite à leur parent. Si ce dernier vaut à `}<em parentName=\"p\">{`non`}</em>{` ou est `}<em parentName=\"p\">{`non applicable`}</em>{` alors toutes les règles enfants seront `}<em parentName=\"p\">{`non applicables`}</em></p>\n    <PublicodeExample rules={`CDD: non\nCDD . indemnité de précarité: 10% * 1500€/mois * 6 mois\n\nindemnités:\n  somme:\n    - 100 €\n    - CDD . indemnité de précarité`} mdxType=\"PublicodeExample\" />\n    <PublicodeExample rules={`région: '\"Centre\"'\n\naides occitanie:\n  applicable si: région = 'Occitanie'\naides occitanie . subvention vélo : 500 €`} mdxType=\"PublicodeExample\" />\n    <h2 {...{\n      \"id\": \"remplacement\"\n    }}>{`Remplacement`}</h2>\n    <p>{`Certaines règles ne s'appliquent parfois que dans quelques situations\nparticulières et modifier la définition des règles générales pour prendre en\ncompte ces particularités pose des problèmes de maintenabilité de la base de\nrègles.`}</p>\n    <p>{`Publicodes dispose d'un mécanisme de remplacement qui permet d'amender n'importe\nquelle règle existante sans avoir besoin de la modifier :`}</p>\n    <PublicodeExample rules={`frais de repas: 5 €/repas\n\nconvention hôtels cafés restaurants: oui\nconvention hôtels cafés restaurants . frais de repas restaurateur:\n  remplace: frais de repas\n  valeur: 6 €/repas\n\nmontant repas mensuels: 20 repas * frais de repas`} mdxType=\"PublicodeExample\" />\n    <p>{`On peut également choisir de remplacer dans un contexte donné :`}</p>\n    <PublicodeExample rules={`temps de préparation: 20 min\ntemps de cuisson: 20 min\n\nrobot de cuisine:\n  remplace:\n    - règle: temps de préparation\n      sauf dans: temps original\n      par: 10 min\n  valeur: oui\n\ntemps original:\n  formule: temps de préparation + temps de cuisson\n\ntemps modifié:\n  formule: temps de préparation + temps de cuisson`} mdxType=\"PublicodeExample\" />\n    <admonition {...{\n      \"title\": \"Note\",\n      \"type\": \"info\"\n    }}><p parentName=\"admonition\">{`Les remplacement sont implémentés sous forme d'une substitution de variable. Quand une règle en remplace une autre, c'est toutes les références à la règle remplacée qui vont être changées par la valeur de remplacement.`}</p></admonition>\n    <h2 {...{\n      \"id\": \"règle-imbriquées\"\n    }}>{`Règle imbriquées`}</h2>\n    <h3 {...{\n      \"id\": \"a-lintérieur-des-mécanismes--nom\"\n    }}>{`A l'intérieur des mécanismes : `}<inlineCode parentName=\"h3\">{`nom`}</inlineCode></h3>\n    <p>{`Si le mécanisme de remplacement permet de faire des substitutions de règles\ncomplètes, il est parfois utile de ne modifier qu'un seul paramètre d'une règle\nexistante, par exemple modifier le facteur d'une multiplication tout en\nconservant le reste de sa définition inchangée.`}</p>\n    <p>{`Une première manière de faire consiste à extraire le paramètre en question dans\nune règle indépendante, le rendant ainsi accessible et modifiable depuis\nl'extérieur :`}</p>\n    <PublicodeExample rules={`prime:\n  multiplication:\n    assiette: 1000€\n    taux: taux\n\nprime . taux: 5%\n\nsuper-prime:\n  remplace: prime . taux\n  valeur: 10%`} meta={`prime`} mdxType=\"PublicodeExample\" />\n    <p>{`Ce code fonctionne mais il nous oblige a créer une règle `}<inlineCode parentName=\"p\">{`prime . taux`}</inlineCode>{` qui\nn'est pas pertinente en tant qu'entité autonome, uniquement pour pouvoir la modifier avec un `}<inlineCode parentName=\"p\">{`remplace`}</inlineCode>{`.`}</p>\n    <p>{`On a aussi introduit une indirection dans la définition de la prime en remplaçant\nune ligne explicite `}<inlineCode parentName=\"p\">{`taux: 5%`}</inlineCode>{` par une référence vers une règle tierce\n`}<inlineCode parentName=\"p\">{`taux: taux`}</inlineCode>{`, qui est loin d'être aussi claire.`}</p>\n    <p>{`Pour ce cas d'usage il est possible de définir une `}<em parentName=\"p\">{`règle imbriquée`}</em>{`.\nOn garde la définition de la prime inchangée et on annote la valeur à laquelle\non veut accéder depuis l'extérieur avec le mot clé `}<inlineCode parentName=\"p\">{`nom`}</inlineCode>{` :`}</p>\n    <PublicodeExample rules={`prime:\n  multiplication:\n    assiette: 1000€\n    taux:\n      nom: taux\n      valeur: 5%\n\nsuper-prime:\n  remplace: prime . taux\n  valeur: 10%`} meta={`prime`} mdxType=\"PublicodeExample\" />\n    <h3 {...{\n      \"id\": \"directement-sur-la-règle--avec\"\n    }}>{`Directement sur la règle : `}<inlineCode parentName=\"h3\">{`avec`}</inlineCode></h3>\n    <PublicodeExample rules={`prix final:\n   valeur: 157 € * (100% - 20%)`} meta={`prix-final`} mdxType=\"PublicodeExample\" />\n    <p>{`Dans cet exemple, si l'on veut extraire le prix et la promotion dans des variables séparées, on est obligé de les définir à côté de la règle `}<inlineCode parentName=\"p\">{`prix final`}</inlineCode>{` :`}</p>\n    <PublicodeExample rules={`prix final:\n   valeur: prix de base * (100% - promotion)\nprix final . prix de base: 157€\nprix final . promotion: 20%`} meta={`prix-final`} mdxType=\"PublicodeExample\" />\n    <p>{`Pour alléger cette écriture, on peut utiliser la notation `}<inlineCode parentName=\"p\">{`avec`}</inlineCode>{` qui permet de définir des règles imbriquées directement depuis une règle parente :`}</p>\n    <PublicodeExample rules={`prix final:\n   valeur: prix de base * (100% - réduction)\n   avec:\n     prix de base: 157 €\n     réduction: 20%`} mdxType=\"PublicodeExample\" />\n    <admonition {...{\n      \"type\": \"info\"\n    }}><p parentName=\"admonition\">{`On peut tout à fait combiner les deux écritures `}<inlineCode parentName=\"p\">{`nom`}</inlineCode>{` et `}<inlineCode parentName=\"p\">{`avec`}</inlineCode>{` :`}</p><PublicodeExample rules={`cotisation:\n  produit:\n    assiette: assiette\n    taux: 2.8%\n  plafond:\n    nom: plafond\n    le minimum de:\n      - 50 % * PFSS\n      - plafond forfaitaire\n    avec:\n      plafond forfaitaire: 2000 €\n\nPFSS: 3400 €\nassiette: 2000 €\n`} meta={`cotisation`} mdxType=\"PublicodeExample\" /></admonition>\n    <h2 {...{\n      \"id\": \"règles-non-définie\"\n    }}>{`Règles non définie`}</h2>\n    <p>{`Il est possible de laisser certaines règles vide pour être saisie par l'utilisateur par exemple.\nLors de l'évaluation, les variables dont les valeurs ne sont pas renseignées sont remontées.`}</p>\n    <PublicodeExample rules={`salaire brut:\n  unité: €/mois\n\nsalaire net: salaire brut - 20 %`} mdxType=\"PublicodeExample\" />\n    <p>{`Il est possible de donner une valeur par défaut. Les variables manquantes seront quand même remontées, et le moteur utilisera la valeur par défaut pour le calcul.`}</p>\n    <PublicodeExample rules={`durée:\n  par défaut: 2 mois\n\nsalaire brut:\n  par défaut: 1500 €/mois\n\nindemnité de CDD: 10 % * salaire brut * durée`} mdxType=\"PublicodeExample\" />\n    <h2 {...{\n      \"id\": \"règles-privées\"\n    }}>{`Règles privées`}</h2>\n    <p>{`Par défaut, les règles publicodes sont accessibles partout, tout le temps, que\nce soit depuis une autre règle ou lors de l'évaluation.`}</p>\n    <p>{`Si on ne souhaite pas exposer certaines règles internes, il est possible de les marquer comme `}<inlineCode parentName=\"p\">{`privée`}</inlineCode>{` :`}</p>\n    <ul>\n      <li parentName=\"ul\">{`soit en ajoutant un attribut `}<inlineCode parentName=\"li\">{`privé: oui`}</inlineCode>{` dans le corps de la règle`}</li>\n      <li parentName=\"ul\">{`soit en préfixant le nom de la règle par : `}<inlineCode parentName=\"li\">{`[privé]`}</inlineCode></li>\n    </ul>\n    <p>{`Les règles privées permettent d'encapsuler des calculs intermédiaires. Elles sont utiles si\nvous exposez votre base de règles à des utilisateurs tiers (via un paquet npm ou l'API REST) car elles\npermettent d'améliorer la maintenabilité sans sacrifier la lisibilité de la base de règle.`}</p>\n    <PublicodeExample rules={`assiette: 2100 €\nPFSS: 4510 €\ncotisation:\n  produit:\n    assiette: assiette\n    taux: 2.8%\n  plafond:\n    le minimum de:\n      - 50 % * PFSS\n      - plafond forfaitaire\n  avec:\n    '[privé] plafond forfaitaire: 2000 €'`} mdxType=\"PublicodeExample\" />\n    <h3 {...{\n      \"id\": \"comportement-des-règles-privées\"\n    }}>{`Comportement des règles privées`}</h3>\n    <ul>\n      <li parentName=\"ul\">{`Les règles privées peuvent être référencées depuis toutes les règles située dans l'espace de nom parent direct. Par exemple, si la règle a . b est privée, elle peut être référencée depuis a . b . c, a . x, a, mais pas d ou d . c.`}</li>\n      <li parentName=\"ul\">{`Les règles privées ne possèdent pas de page de documentation dédiées`}</li>\n      <li parentName=\"ul\">{`L'appel de getRule sur une règle privée jette une erreur`}</li>\n      <li parentName=\"ul\">{`Elles ne sont pas listées dans `}<inlineCode parentName=\"li\">{`getParsedRules`}</inlineCode></li>\n      <li parentName=\"ul\">{`On ne peut pas évaluer une référence à une règle privée`}</li>\n      <li parentName=\"ul\">{`On ne peut pas modifier une règles privée via la situation`}</li>\n    </ul>\n    </MDXLayout>;\n}\n;\nMDXContent.isMDXComponent = true;\n","// extracted by mini-css-extract-plugin\nexport default {\"container\":\"container_Lusa\",\"button\":\"button_RcQe\",\"editor\":\"editor_BeH5\"};"],"names":["Playground","lazy","PublicodeExample","_ref","rules","meta","code","setCode","useState","trim","edit","setEdit","target","setTarget","language","useEffect","React","className","publicodeStyles","container","Suspense","fallback","defaultTarget","onTargetChange","onChange","text","CodeBlock","button","onClick","e","style","top","bottom","frontMatter","sidebar_position","title","contentTitle","undefined","metadata","assets","toc","value","id","level","layoutProps","MDXLayout","MDXContent","components","props","mdx","_extends","mdxType","parentName","isMDXComponent"],"sourceRoot":""}